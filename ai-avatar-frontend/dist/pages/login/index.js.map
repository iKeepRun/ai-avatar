{"version":3,"file":"pages/login/index.js","mappings":";;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;ACpHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","sources":["webpack://ai-avatar-frontend/./src/pages/login/index.tsx?84ae","webpack://ai-avatar-frontend/._src_pages_login_index.tsx"],"sourcesContent":["import _regeneratorRuntime from \"D:/_code/ai-avatar/ai-avatar-frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _asyncToGenerator from \"D:/_code/ai-avatar/ai-avatar-frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport _slicedToArray from \"D:/_code/ai-avatar/ai-avatar-frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";\nimport { View, Image, Button } from '@tarojs/components';\nimport Taro from '@tarojs/taro';\nimport { useState } from 'react';\nimport { userApi } from '../../services/api';\nimport './index.scss';\nimport { jsx as _jsx, jsxs as _jsxs, Fragment as _Fragment } from \"react/jsx-runtime\";\nexport default function Login() {\n  var _useState = useState(false),\n    _useState2 = _slicedToArray(_useState, 2),\n    loading = _useState2[0],\n    setLoading = _useState2[1];\n  var _useState3 = useState(new Set()),\n    _useState4 = _slicedToArray(_useState3, 2),\n    privacyResolves = _useState4[0],\n    setPrivacyResolves = _useState4[1];\n  var _useState5 = useState(false),\n    _useState6 = _slicedToArray(_useState5, 2),\n    privacyVisible = _useState6[0],\n    setPrivacyVisible = _useState6[1];\n  var _useState7 = useState(false),\n    _useState8 = _slicedToArray(_useState7, 2),\n    privacyAgreed = _useState8[0],\n    setPrivacyAgreed = _useState8[1];\n  var _useState9 = useState(null),\n    _useState10 = _slicedToArray(_useState9, 2),\n    userInfo = _useState10[0],\n    setUserInfo = _useState10[1];\n  var handleLogin = /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n      var _yield$Taro$login, code, res;\n      return _regeneratorRuntime().wrap(function _callee$(_context) {\n        while (1) switch (_context.prev = _context.next) {\n          case 0:\n            _context.next = 2;\n            return Taro.login();\n          case 2:\n            _yield$Taro$login = _context.sent;\n            code = _yield$Taro$login.code;\n            if (code) {\n              _context.next = 6;\n              break;\n            }\n            throw new Error('获取登录code失败');\n          case 6:\n            _context.next = 8;\n            return userApi.login({\n              code: code\n              // avatarUrl: userInfo.avatarUrl,\n              // nickName: userInfo.nickName\n            });\n          case 8:\n            res = _context.sent;\n            if (!(res.data.code !== 200)) {\n              _context.next = 11;\n              break;\n            }\n            throw new Error(res.data.msg || '登录失败');\n          case 11:\n            // 保存token\n            Taro.setStorageSync('token', res.data.data);\n\n            // 返回首页\n            Taro.switchTab({\n              url: '/pages/index/index'\n            });\n          case 13:\n          case \"end\":\n            return _context.stop();\n        }\n      }, _callee);\n    }));\n    return function handleLogin() {\n      return _ref.apply(this, arguments);\n    };\n  }();\n  return /*#__PURE__*/_jsx(_Fragment, {\n    children: /*#__PURE__*/_jsxs(View, {\n      className: \"login-page\",\n      children: [/*#__PURE__*/_jsxs(View, {\n        className: \"header\",\n        children: [/*#__PURE__*/_jsx(Image, {\n          className: \"logo\",\n          src: \"../../assets/images/logo.png\"\n        }), /*#__PURE__*/_jsx(View, {\n          className: \"title\",\n          children: \"AI\\u5934\\u50CF\\u751F\\u6210\\u5668\"\n        }), /*#__PURE__*/_jsx(View, {\n          className: \"subtitle\",\n          children: \"\\u4E00\\u952E\\u751F\\u6210\\u4F60\\u7684\\u4E13\\u5C5E\\u5934\\u50CF\"\n        })]\n      }), /*#__PURE__*/_jsx(View, {\n        className: \"content\",\n        children: /*#__PURE__*/_jsx(Button, {\n          className: \"login-button\",\n          loading: loading,\n          onClick: handleLogin,\n          children: \"\\u5FAE\\u4FE1\\u4E00\\u952E\\u767B\\u5F55\"\n        })\n      }), /*#__PURE__*/_jsx(View, {\n        className: \"footer\",\n        children: /*#__PURE__*/_jsxs(View, {\n          className: \"tips\",\n          children: [/*#__PURE__*/_jsx(View, {\n            className: \"tip-item\",\n            children: \"\\u767B\\u5F55\\u540E\\u5373\\u53EF\\u4F7F\\u7528\\u5B8C\\u6574\\u529F\\u80FD\"\n          }), /*#__PURE__*/_jsx(View, {\n            className: \"tip-item\",\n            children: \"\\u6211\\u4EEC\\u627F\\u8BFA\\u4FDD\\u62A4\\u60A8\\u7684\\u9690\\u79C1\\u5B89\\u5168\"\n          })]\n        })\n      })]\n    })\n  });\n}","import { createPageConfig } from '@tarojs/runtime'\nimport component from \"!!../../../node_modules/@tarojs/taro-loader/lib/entry-cache.js?name=pages/login/index!./index.tsx\"\nvar config = {};\n\n\nvar inst = Page(createPageConfig(component, 'pages/login/index', {root:{cn:[]}}, config || {}))\n\n\nexport default component\n"],"names":[],"sourceRoot":""}