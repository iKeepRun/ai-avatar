{"version":3,"file":"pages/member/index.js","mappings":";;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;AC9KA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","sources":["webpack://ai-avatar-frontend/./src/pages/member/index.tsx?0f44","webpack://ai-avatar-frontend/._src_pages_member_index.tsx"],"sourcesContent":["import _regeneratorRuntime from \"D:/_code/ai-avatar/ai-avatar-mini-program/ai-avatar-frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _objectSpread from \"D:/_code/ai-avatar/ai-avatar-mini-program/ai-avatar-frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";\nimport _asyncToGenerator from \"D:/_code/ai-avatar/ai-avatar-mini-program/ai-avatar-frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport _slicedToArray from \"D:/_code/ai-avatar/ai-avatar-mini-program/ai-avatar-frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";\nimport { useState } from 'react';\nimport { View } from '@tarojs/components';\nimport { observer } from 'mobx-react';\nimport { useStore } from '@/stores';\nimport { memberApi } from '@/services/api';\nimport './index.scss';\n\n// 导入图片\nimport { jsx as _jsx, jsxs as _jsxs } from \"react/jsx-runtime\";\nvar MemberPage = function MemberPage() {\n  var _useStore = useStore(),\n    userStore = _useStore.userStore;\n  var _useState = useState(false),\n    _useState2 = _slicedToArray(_useState, 2),\n    loading = _useState2[0],\n    setLoading = _useState2[1];\n  var handleSubscribe = /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(memberType) {\n      var res, paymentParams;\n      return _regeneratorRuntime().wrap(function _callee$(_context) {\n        while (1) switch (_context.prev = _context.next) {\n          case 0:\n            _context.prev = 0;\n            setLoading(true);\n            _context.next = 4;\n            return memberApi.subscribe(memberType);\n          case 4:\n            res = _context.sent;\n            paymentParams = res.data.paymentParams; // 调用微信支付\n            _context.next = 8;\n            return Taro.requestPayment(_objectSpread(_objectSpread({}, paymentParams), {}, {\n              success: function success() {\n                Taro.showToast({\n                  title: '开通成功',\n                  icon: 'success'\n                });\n                userStore.updateMemberInfo();\n              },\n              fail: function fail() {\n                Taro.showToast({\n                  title: '支付取消',\n                  icon: 'none'\n                });\n              }\n            }));\n          case 8:\n            _context.next = 13;\n            break;\n          case 10:\n            _context.prev = 10;\n            _context.t0 = _context[\"catch\"](0);\n            Taro.showToast({\n              title: '开通失败',\n              icon: 'none'\n            });\n          case 13:\n            _context.prev = 13;\n            setLoading(false);\n            return _context.finish(13);\n          case 16:\n          case \"end\":\n            return _context.stop();\n        }\n      }, _callee, null, [[0, 10, 13, 16]]);\n    }));\n    return function handleSubscribe(_x) {\n      return _ref.apply(this, arguments);\n    };\n  }();\n  return /*#__PURE__*/_jsxs(View, {\n    className: \"member-page\",\n    children: [/*#__PURE__*/_jsxs(View, {\n      className: \"member-card\",\n      children: [/*#__PURE__*/_jsxs(View, {\n        className: \"card-header\",\n        children: [/*#__PURE__*/_jsx(View, {\n          className: \"vip-icon\"\n        }), /*#__PURE__*/_jsx(View, {\n          className: \"vip-title\",\n          children: \"AI\\u5934\\u50CF\\u4F1A\\u5458\"\n        })]\n      }), /*#__PURE__*/_jsxs(View, {\n        className: \"privilege-list\",\n        children: [/*#__PURE__*/_jsxs(View, {\n          className: \"privilege-item\",\n          children: [/*#__PURE__*/_jsx(View, {\n            className: \"icon-check\"\n          }), /*#__PURE__*/_jsx(Text, {\n            children: \"\\u89E3\\u9501\\u6240\\u6709\\u98CE\\u683C\\u6A21\\u677F\"\n          })]\n        }), /*#__PURE__*/_jsxs(View, {\n          className: \"privilege-item\",\n          children: [/*#__PURE__*/_jsx(View, {\n            className: \"icon-check\"\n          }), /*#__PURE__*/_jsx(Text, {\n            children: \"\\u65E0\\u6C34\\u5370\\u5BFC\\u51FA\"\n          })]\n        }), /*#__PURE__*/_jsxs(View, {\n          className: \"privilege-item\",\n          children: [/*#__PURE__*/_jsx(View, {\n            className: \"icon-check\"\n          }), /*#__PURE__*/_jsx(Text, {\n            children: \"\\u6279\\u91CF\\u5BFC\\u51FA\"\n          })]\n        }), /*#__PURE__*/_jsxs(View, {\n          className: \"privilege-item\",\n          children: [/*#__PURE__*/_jsx(View, {\n            className: \"icon-check\"\n          }), /*#__PURE__*/_jsx(Text, {\n            children: \"\\u4F18\\u5148\\u751F\\u6210\\u961F\\u5217\"\n          })]\n        })]\n      })]\n    }), /*#__PURE__*/_jsxs(View, {\n      className: \"price-cards\",\n      children: [/*#__PURE__*/_jsxs(View, {\n        className: \"price-card\",\n        onClick: function onClick() {\n          return handleSubscribe(1);\n        },\n        children: [/*#__PURE__*/_jsx(View, {\n          className: \"price-type\",\n          children: \"\\u6708\\u5EA6\\u4F1A\\u5458\"\n        }), /*#__PURE__*/_jsxs(View, {\n          className: \"price-amount\",\n          children: [/*#__PURE__*/_jsx(Text, {\n            className: \"symbol\",\n            children: \"\\xA5\"\n          }), /*#__PURE__*/_jsx(Text, {\n            className: \"number\",\n            children: \"19.9\"\n          })]\n        }), /*#__PURE__*/_jsx(View, {\n          className: \"price-desc\",\n          children: \"\\u6BCF\\u6708\\u7EA60.66\\u5143/\\u5929\"\n        })]\n      }), /*#__PURE__*/_jsxs(View, {\n        className: \"price-card recommended\",\n        onClick: function onClick() {\n          return handleSubscribe(2);\n        },\n        children: [/*#__PURE__*/_jsx(View, {\n          className: \"recommend-tag\",\n          children: \"\\u63A8\\u8350\"\n        }), /*#__PURE__*/_jsx(View, {\n          className: \"price-type\",\n          children: \"\\u5E74\\u5EA6\\u4F1A\\u5458\"\n        }), /*#__PURE__*/_jsxs(View, {\n          className: \"price-amount\",\n          children: [/*#__PURE__*/_jsx(Text, {\n            className: \"symbol\",\n            children: \"\\xA5\"\n          }), /*#__PURE__*/_jsx(Text, {\n            className: \"number\",\n            children: \"199\"\n          })]\n        }), /*#__PURE__*/_jsx(View, {\n          className: \"price-desc\",\n          children: \"\\u76F8\\u5F53\\u4E8E16.6\\u5143/\\u6708\"\n        })]\n      })]\n    }), /*#__PURE__*/_jsxs(View, {\n      className: \"terms\",\n      children: [\"\\u5F00\\u901A\\u5373\\u8868\\u793A\\u540C\\u610F\", /*#__PURE__*/_jsx(Text, {\n        className: \"link\",\n        children: \"\\u300A\\u4F1A\\u5458\\u670D\\u52A1\\u534F\\u8BAE\\u300B\"\n      })]\n    })]\n  });\n};\nexport default observer(MemberPage);","import { createPageConfig } from '@tarojs/runtime'\nimport component from \"!!../../../node_modules/@tarojs/taro-loader/lib/entry-cache.js?name=pages/member/index!./index.tsx\"\nvar config = {};\n\n\nvar inst = Page(createPageConfig(component, 'pages/member/index', {root:{cn:[]}}, config || {}))\n\n\nexport default component\n"],"names":[],"sourceRoot":""}